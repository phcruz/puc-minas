(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{X3zk:function(r,e,o){"use strict";o.r(e);var a=o("mrSG"),i=o("ARm4"),t=o("8Y7J"),n=o("s7LF"),s=o("GS7A"),c=o("EVdn"),l=o("/mjz"),d=o("Jm54"),m=o("TKFM"),g=o("9WgB"),u=o("IzEk"),h=o("lJxs"),b=o("s6ns"),p=o("zJla");let f=class{constructor(r){this.dialog=r}openDialog(r,e,o){this.dialogRef=this.dialog.open(p.a,{width:"300px",data:{titulo:r,informacao:e,descricao:o}})}confirmed(){return this.dialogRef.afterClosed().pipe(Object(u.a)(1),Object(h.a)(r=>r))}};f.ctorParameters=()=>[{type:b.b}],f=a.b([Object(t.D)({providedIn:"root"})],f);var v=o("iInd"),S=o("QktW"),k=o("KRgJ"),w=o("fL5g"),O=o("cUpR"),I=o("Gi4r"),y=o("r8II"),U=o("5BJY"),A=o("7Cbv");let E=class{constructor(r,e,o,a,i,t,n,s,c,l,d){this.appService=r,this.toastService=e,this.router=o,this.authService=a,this.dialogMensagemService=i,this.dialogErroService=t,this.indicatorService=n,this.dialogConfirmacao=s,this.matIconRegistry=c,this.domSanitizer=l,this.deviceService=d,this.googleLogoURL="https://raw.githubusercontent.com/fireflysemantics/logo/master/Google.svg",this.urlPlanoFundo="",this.hide=!0,this.matIconRegistry.addSvgIcon("logo_google",this.domSanitizer.bypassSecurityTrustResourceUrl(this.googleLogoURL))}ngOnInit(){this.obtemInfosDispositivo(),this.getPlanoFundo(),this.loginForm=new n.c({email:new n.b("",[n.k.required,n.k.email]),senha:new n.b("",[n.k.required,n.k.minLength(6),n.k.maxLength(12),n.k.pattern("^(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{6,18})$")])})}submit(){if(this.loginForm.valid){const r=this.loginForm.get("email").value;this.buscarEmail(r)}}buscarEmail(r){this.appService.buscaUsuarioEmail(r).subscribe(r=>{this.verificaUsuario(r.body)},r=>{this.dialogErroService.showMensagemErroDialog(r)})}verificaUsuario(r){if(null==r)this.toastService.showToast("E-mail n\xe3o cadastrado. Clique abaixo e cadastre-se.");else{const e=d.a.criptografaSenha(this.loginForm.get("senha").value);r.senha===e?r.ativo?this.realizaLogin(r):this.exibeAlertDialogLogin():this.toastService.showToast("Usuario/senha incorreta.")}}realizaLogin(r){this.appService.postLoginUsuario(r).subscribe(r=>{this.salvaDadosUsuarioSession(r.body),d.a.setItemSessionStorage(m.a.AUTHORIZATION,r.headers.get(m.a.AUTHORIZATION)),this.controleAcessoPlataforma(),this.router.navigate(["app/home"])},r=>{this.dialogErroService.showMensagemErroDialog(r)})}exibeAlertDialogLogin(){this.dialogMensagemService.openDialog("Erro","OPS!  \ud83d\ude22 \nParece que sua conta est\xe1 inativa. Verifique seu e-mail e realize a valida\xe7\xe3o da sua conta para liberar o seu acesso.Em caso de d\xfavidas entre em contato com nossa equipe: contato@futbolistafc.com.br","")}signOut(){this.authService.signOut()}socialLogin(r){let e;"Facebook"===r?e=w.c.PROVIDER_ID:"Google"===r&&(e=w.d.PROVIDER_ID),this.authService.signIn(e).then(r=>{this.user=r,this.loggedIn=null!=r,e===w.d.PROVIDER_ID&&this.buscaEmailUsuarioGoogle(),e===w.c.PROVIDER_ID&&this.buscaEmailUsuarioFacebook()})}buscaEmailUsuarioGoogle(){this.appService.buscaUsuarioEmail(this.user.email).subscribe(r=>{this.verificaUsuarioGoogle(r.body)},r=>{this.dialogErroService.showMensagemErroDialog(r)})}verificaUsuarioGoogle(r){if(null==r){const r=this.criaObjetoUsuario(m.a.GOOGLE);this.cadastraUsuarioWebService(r)}else this.realizaLogin(r)}buscaEmailUsuarioFacebook(){this.appService.buscaUsuarioEmail(this.user.email).subscribe(r=>{this.verificaUsuarioFacebook(r.body)},r=>{this.dialogErroService.showMensagemErroDialog(r)})}verificaUsuarioFacebook(r){if(null==r){const r=this.criaObjetoUsuario(m.a.FACEBOOK);this.cadastraUsuarioWebService(r)}else this.realizaLogin(r)}cadastraUsuarioWebService(r){this.appService.postCadastraUsuario(r).subscribe(r=>{this.salvaDadosUsuarioSession(r.body),d.a.setItemSessionStorage(m.a.AUTHORIZATION,r.headers.get(m.a.AUTHORIZATION)),this.controleAcessoPlataforma(),this.router.navigate(["app/home"])},r=>{this.dialogErroService.showMensagemErroDialog(r)})}criaObjetoUsuario(r){let e;return e=Object(y.stringify)(this.user.name).length>m.a.TAMANHO_MAX_NOME?Object(y.stringify)(this.user.name).substring(0,m.a.TAMANHO_MAX_NOME):this.user.name,{nome:e,email:this.user.email,senha:d.a.criptografaSenha("Google123"),telefone:"",ativo:!0,localCadastro:r}}recuperacaoSenhaUsuario(){if(this.loginForm.get("email").valid){const r=this.loginForm.get("email").value;this.recuperarSenhaUsuario(r)}else this.exibeMensagemPreenchecampo()}exibeMensagemPreenchecampo(){this.dialogConfirmacao.openDialog('Para recuperar a sua senha, preencha o campo "E-mail" com seu e-mail cadastrado e clique em "Recuperar minha senha"',""),this.dialogConfirmacao.confirmed().subscribe(r=>{c("#email-login").focus()})}recuperarSenhaUsuario(r){this.appService.getRecuperaSenhaUsuario(r).subscribe(r=>{this.toastService.showToast(r.body)},r=>{this.dialogErroService.showMensagemErroDialog(r)})}getPlanoFundo(){this.appService.getPlanoFundo().subscribe(r=>{this.urlPlanoFundo=r.body.urlImagem,c("app-login").css("background-image","url("+this.urlPlanoFundo+")"),c("app-login").css("background-size","cover")},r=>{this.dialogErroService.showMensagemErroDialog(r)})}moverPainel(r){c(r).on("mousedown",(function(r){c(this).addClass("active");var e=r.pageY-c(".active").offset().top,o=r.pageX-c(".active").offset().left;return c(this).parents().on("mousemove",(function(r){c(".active").offset({top:r.pageY-e,left:r.pageX-o,position:"relative"})})),c(this).on("mouseup",(function(){c(this).removeClass("active")})),!1}))}controleAcessoPlataforma(){const r=this.obtemInfosDispositivo();this.appService.postAcessoPlataforma(r).subscribe(r=>{},r=>{})}obtemInfosDispositivo(){const r=this.deviceService.getDeviceInfo();return this.deviceService.isDesktop()?{sistema:r.os,dispositivo:r.os_version,descricao:r.userAgent,detalhe:r.browser+" - "+r.browser_version}:{sistema:r.os,dispositivo:r.device,descricao:r.userAgent,detalhe:r.browser+" - "+r.browser_version}}salvaDadosUsuarioSession(r){const e={nome:r.nome,email:r.email,transaction:Object(A.a)()+"#"+r.idUsuario};d.a.setItemSessionStorage(m.a.INFOS_USUARIO_LOGADO,JSON.stringify(e)),d.a.setItemSessionStorage(m.a.AVATAR_USUARIO_LOGADO,r.urlImagem),this.indicatorService.setSalvaDadosUsuarioLogado(m.a.SALVA_TODOS)}};E.ctorParameters=()=>[{type:l.a},{type:g.a},{type:v.f},{type:w.a},{type:f},{type:S.a},{type:k.a},{type:U.a},{type:I.b},{type:O.b},{type:i.b}],E=a.b([Object(t.o)({selector:"app-login",template:a.c(o("in5m")).default,animations:[Object(s.n)("Fading",[Object(s.k)("void",Object(s.l)({opacity:0})),Object(s.m)(":enter",Object(s.e)("1.5s ease-out"))])],styles:[a.c(o("n7sk")).default]})],E);const x=[{path:"",component:E}];let F=class{};F=a.b([Object(t.L)({imports:[v.g.forChild(x)],exports:[v.g]})],F);var D=o("SVse"),L=o("vWh4");o.d(e,"LoginModule",(function(){return R}));let R=class{};R=a.b([Object(t.L)({declarations:[E],imports:[D.b,F,L.a,n.e,n.j]})],R)},in5m:function(r,e,o){"use strict";o.r(e),e.default='<div class="container">\r\n  <div class="row">\r\n    <div class="col-md-3 col-sm-1"></div>\r\n    <div class="col-md-6 col-sm-10" @Fading (click)="moverPainel(\'#painelLogin\')" id="painelLogin">\r\n      <mat-card class="card-backgroud">\r\n        <div class="div-center">\r\n          <img class="card-image" src="assets/img/logo_app_1.png"/>\r\n        </div>\r\n        <mat-card-title class="card-title">Login</mat-card-title>\r\n        <mat-card-content>\r\n          <div class="card-form">\r\n          <form [formGroup]="loginForm" (ngSubmit)="submit()" >\r\n            <p>\r\n              <mat-form-field>\r\n                <input id="email-login" type="text" matInput placeholder="Email" formControlName="email" maxlength="40"/>\r\n                <mat-error *ngIf="loginForm.controls.email.invalid"><strong>Informe um email v\xe1lido</strong></mat-error>\r\n              </mat-form-field>\r\n            </p>\r\n\r\n            <p>\r\n              <mat-form-field>\r\n                <input [type]="hide ? \'password\' : \'text\'" matInput placeholder="Senha" formControlName="senha" maxlength="12"/>\r\n                <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="\'Hide password\'" [attr.aria-pressed]="hide">\r\n                <mat-icon>{{hide ? \'visibility_off\' : \'visibility\'}}</mat-icon>\r\n                </button>\r\n                <mat-error *ngIf="loginForm.controls.senha.invalid"><strong>Informe sua senha</strong></mat-error>\r\n              </mat-form-field>\r\n            </p>\r\n\r\n            <div class="button">\r\n              <button type="submit" mat-button class="card-button">ENTRAR</button>\r\n            </div>\r\n          </form>\r\n            <br/>\r\n            <div class="button">\r\n              <button mat-button class="button-google" (click)="socialLogin(\'Google\')">\r\n                <mat-icon class="button-icon-google" svgIcon="logo_google"></mat-icon>Login com Google\r\n              </button>\r\n            </div>\r\n            <br/>\r\n            <div class="button">\r\n              <button mat-button class="button-facebook" (click)="socialLogin(\'Facebook\')">\r\n                <img class="button-img-facebook" src="assets/img/logo_facebook.png"/>Login com Facebook\r\n              </button>\r\n            </div>\r\n            <br/>\r\n\r\n            <div class="div-center">\r\n              <a routerLink="/cadastro"><button mat-button class="card-button-link">Cadastre-se e venha se divertir</button></a>\r\n            </div>\r\n\r\n            <div class="div-center">\r\n              <button mat-button class="card-button-link" (click)="recuperacaoSenhaUsuario()">Recuperar minha senha</button>\r\n            </div>\r\n\r\n        </div>\r\n        </mat-card-content>\r\n      </mat-card>\r\n    </div>\r\n    <div class="col-md-3 col-sm-1"></div>\r\n  </div>\r\n</div>\r\n'},n7sk:function(r,e,o){"use strict";o.r(e),e.default=":host {\r\n  display: -webkit-box;\r\n  display: flex;\r\n  -webkit-box-pack: center;\r\n          justify-content: center;\r\n}\r\n\r\n.mat-form-field {\r\n  width: 100%;\r\n}\r\n\r\n.card-backgroud {\r\n  background-color: #303030;\r\n  margin-top: 6%;\r\n  margin-bottom: 10%;\r\n}\r\n\r\n.card-title {\r\n  color: white;\r\n}\r\n\r\n.div-center {\r\n  text-align: center;\r\n  margin-top: 5px;\r\n}\r\n\r\n.card-image {\r\n  max-width: 40%;\r\n  max-height: 40%;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.card-button {\r\n  background-color: #5A5A5C; width: 100%; color: white; font-weight: bold;\r\n}\r\n\r\n.card-button-google {\r\n  background-color: white; width: 100%; color: #5A5A5C;\r\n}\r\n\r\n.card-button-facebook {\r\n  background-color: blue; width: 100%; color: white;\r\n}\r\n\r\n.card-form {\r\n  width: 100%;\r\n}\r\n\r\n.card-button-link {\r\n  background-color: #303030;\r\n  color: white;\r\n  word-break: break-all;\r\n  padding: 0px;\r\n}\r\n\r\nmat-card-title,\r\nmat-card-content {\r\n  display: -webkit-box;\r\n  display: flex;\r\n  -webkit-box-pack: center;\r\n          justify-content: center;\r\n}\r\n\r\n::ng-deep .mat-form-field .mat-input-element {\r\n  color: gray;\r\n}\r\n\r\n::ng-deep .mat-form-field .mat-form-field-label {\r\n  color: gray!important;\r\n}\r\n\r\n::ng-deep .mat-form-field .mat-form-field-underline {\r\n  background-color: gray;\r\n}\r\n\r\n::ng-deep .mat-form-field .mat-form-field-ripple {\r\n  background-color: gray;\r\n}\r\n\r\n::ng-deep .mat-form-field .mat-form-field-required-marker {\r\n  color: gray;\r\n}\r\n\r\n::ng-deep .mat-form-field.mat-focused .mat-form-field-label {\r\n  color: white!important;\r\n}\r\n\r\n::ng-deep .mat-form-field.mat-focused .mat-form-field-ripple {\r\n  background-color: white;\r\n}\r\n\r\n::ng-deep .mat-form-field.mat-focused .mat-form-field-required-marker {\r\n  color: white;\r\n}\r\n\r\n::ng-deep .mat-form-field.mat-focused .mat-input-element {\r\n  color: white;\r\n}\r\n\r\n::ng-deep .mat-form-field.mat-form-field-invalid .mat-input-element {\r\n  color: red;\r\n}\r\n\r\n::ng-deep .mat-form-field.mat-form-field-invalid .mat-form-field-label {\r\n  color: red!important;\r\n}\r\n\r\n::ng-deep .mat-form-field.mat-form-field-invalid .mat-form-field-label .mat-form-field-required-marker {\r\n  color: red;\r\n}\r\n\r\n::ng-deep .mat-form-field.mat-form-field-invalid .mat-form-field-ripple {\r\n  background-color: red;\r\n}\r\n\r\n.button-google {\r\n  background: #FFFFFF; width: 100%;\r\n  color: black;\r\n}\r\n\r\n.button-icon-google {\r\n  width: 24px;\r\n  height: 24px;\r\n  vertical-align: inherit;\r\n  float: left;\r\n  margin-top: -2px;\r\n}\r\n\r\n.button-facebook {\r\n  background: #1877f2; width: 100%;color: white;\r\n}\r\n\r\n.button-img-facebook {\r\n  width: 27px;\r\n  height: 27px;\r\n  background: white;\r\n  float: left;\r\n  border-radius: 30px;\r\n  padding-top: 5px;\r\n  padding-left: 3px;\r\n  padding-bottom: 0px;\r\n  padding-right: 2px;\r\n  margin-top: 5px;\r\n}\r\n\r\n.active {\r\n  cursor: move;\r\n}\r\n"}}]);